<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script>

            $(document).ready(function(){





<!-- ***************** Rigel AJAX CODE START****************************************-->
         $("#btn1").click(function(){
            $("#div1").load("ajax_info.txt");
                });
<!-- ****************** Rigel AJAX CODE END*******************************************-->
<!-- HERE IS THE NEW STUFF FOR THE BRANCH -->




            function rdata(){
                $.getJSON('data.json',function (data){
                    var nearby = "Stranger Alert";
                    if(data['near']==0){
                        nearby="No one Near";
                    }
                    var calocked = "Door Secured";
                    if(data['door']==1){
                        calocked="Door Open"
                    }
                    $("#pird").text(nearby);
                    $('#tmp').text(data['temp'] + 'Â°C');
                    $('#hm').text(data['humid']+"%");
                    $('#wlev').text(data['gals']+ 'gallons');
                    $('#hesense').text(calocked);
                });
            }
           setInterval(rdata,10000);

            var span = document.getElementById('clocker');
            function  clockit(){
                //https://dev.to/arc__coder/real-time-javascript-clock-2dn0 heavy inspired by this example
                var d = new Date();
                var hrs = d.getHours();
                var min = d.getMinutes();
                var secs = d.getSeconds();
                if (min<10){
                    min = "0" + min;
                }
                if (secs<10){
                    secs = "0" + secs;
                }

                var tstring = (hrs + ":" + min + ":" + secs)
                document.getElementById("clocker").innerHTML = tstring;
            }
            setInterval(clockit,1000);
            $('button').mouseenter(function(){
                    if($(this).hasClass('btn-success')){
                        $(this).removeClass('btn-success');
                    }
                    if($(this).hasClass('btn-danger')){
                        $(this).removeClass('btn-danger');
                    }
                     $(this).addClass('btn-warning');

                });
            $('button').mouseleave(function(){
                $(this).removeClass('btn-warning');
                if($(this).hasClass('grn')){
                        $(this).addClass('btn-success');
                    }
                if($(this).hasClass('rd')){
                    $(this).addClass('btn-danger');
                }
                });
            $('img').mouseenter(function(){
               // console.log($(this));
                var witchpic = $(this).attr("id");
                switch (witchpic){
                    case "thermpic":
                        $("#tmprow").css("background-color","yellow");
                        break;
                    case "ultrpic":
                        $("#ultrow").css("background-color","yellow");
                        break;
                    case "pirpic":
                        $("#pirrow").css("background-color","yellow");
                        break;
                    case "humpic":
                        $("#humrow").css("background-color","yellow");
                        break;
                    case "ledpic":
                        $("#ledrow").css("background-color","yellow");
                        break;
                    case "buzzpic":
                        $("#buzzrow").css("background-color","yellow");
                        break;
                }
            });
            $('img').mouseleave(function(){
               // console.log($(this));
                var witchpic = $(this).attr("id");
                switch (witchpic){
                    case "thermpic":
                        $("#tmprow").css("background-color","white");
                        break;
                    case "ultrpic":
                        $("#ultrow").css("background-color","white");
                        break;
                    case "pirpic":
                        $("#pirrow").css("background-color","white");
                        break;
                    case "humpic":
                        $("#humrow").css("background-color","white");
                        break;
                    case "ledpic":
                        $("#ledrow").css("background-color","white");
                        break;
                    case "buzzpic":
                        $("#buzzrow").css("background-color","white");
                        break;
                }
            });
                $("#lock").click(function(){
                    $.getJSON('ligon.json', function(ligon){
                        console.log("I'm here")
                        alert(ligon['mess']);
                    });
                })
               $("#unlock").click(function(){
                    $.getJSON('ligoff.json', function(ligoff){
                        console.log("I'm here")
                        alert(ligoff['mess']);
                    });
                })
              });
        </script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>-->

        {% if title %}
        <title>{{ title }} - IoT Website</title>
        {% else %}
        <title>Welcome to IoT Website</title>
        {% endif %}



    </head>
    <body>
        <script>


        </script>
        <div class="container">
         <!-- Navigation Bar -->
        <div class=row">
            <ul class="nav">
                <li class="nav-item"><a class="nav-link" href="\data">Data </a></li>
                <!--<li class="nav-item"><a class="nav-link" href="\test">Test </a></li>-->
            </ul>
        </div>
        </div>
         <!-- PAGE CONTENT -->
        {% block content %}
             Default Content
        {% endblock %}

    <div class="text-center">
        <h2>IoT Webpage</h2>
        <p id="cool">All copy rights go to M&K Inc.</p>
        <p class="h6">Please give us an A</p>
    </div>
    </body>
</html>
